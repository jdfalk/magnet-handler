name: Release

on:
    push:
        tags:
            - "v*"
    workflow_dispatch:
        inputs:
            version:
                description: "Version to release (e.g., v1.0.0)"
                required: true
                type: string

permissions:
    contents: write
    packages: write
    attestations: write
    id-token: write
    security-events: write

jobs:
    release:
        name: Build and Release
        uses: jdfalk/ghcommon/.github/workflows/reusable-release.yml@bc6380dd1cfb1a3b8eb24c27d6cfe4a887562b5b # main
        with:
            build-target: "go"
            go-enabled: true
        secrets: inherit
